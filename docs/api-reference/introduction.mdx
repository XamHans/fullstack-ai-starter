---
title: "API Reference"
description: "Complete REST API documentation with authentication, error handling, and standardized response patterns"
---

# API Reference

## What

A complete REST API built with Next.js 15 Route Handlers featuring standardized error handling, authentication wrappers, and consistent response formatting. All endpoints follow the same patterns for predictable integration.

## Why

- **Consistency**: All endpoints return standardized JSON responses
- **Security**: Built-in authentication and authorization patterns
- **Reliability**: Comprehensive error handling and validation
- **Developer Experience**: Predictable API behavior and clear documentation

## How

### Base URL

```
Production: https://yourapp.com/api
Development: http://localhost:3000/api
```

### Authentication

Most endpoints require authentication via session or API key:

```javascript
// Using session (browser)
const response = await fetch('/api/posts', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ title: 'My Post', content: 'Content' }),
  credentials: 'include'
});

// Using API key (server-to-server)
const response = await fetch('/api/posts', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer your-api-key'
  },
  body: JSON.stringify({ title: 'My Post', content: 'Content' })
});
```

### Response Format

All API responses follow this structure:

```typescript
{
  success: boolean;
  data?: T;           // Response data (on success)
  error?: string;     // Error message (on failure)
  message?: string;   // Optional success message
  code?: string;      // Optional error code
}
```

## Example

### Success Response
```json
{
  "success": true,
  "data": {
    "id": "post-123",
    "title": "My Post",
    "content": "Post content",
    "createdAt": "2024-01-01T00:00:00Z"
  }
}
```

### Error Response
```json
{
  "success": false,
  "error": "Post not found",
  "code": "POST_NOT_FOUND"
}
```

## Available Endpoints

### AI Generation
- `POST /api/ai/generate-text` - Generate text with AI models
- `POST /api/ai/chat` - Chat completions with streaming

### File Management
- `POST /api/upload` - Upload files to R2 storage
- `GET /api/upload` - Generate presigned upload URLs
- `DELETE /api/upload` - Delete uploaded files

### Authentication
- `POST /api/auth/sign-in` - Sign in with email/password
- `POST /api/auth/sign-up` - Create new account
- `POST /api/auth/sign-out` - Sign out current session
- `GET /api/auth/session` - Get current session

### Content Management
- `GET /api/posts` - List posts (public)
- `POST /api/posts` - Create post (authenticated)
- `GET /api/posts/[id]` - Get specific post
- `PUT /api/posts/[id]` - Update post (owner only)
- `DELETE /api/posts/[id]` - Delete post (owner only)

## Error Codes

| Code | Description |
|------|-------------|
| `UNAUTHORIZED` | Authentication required |
| `FORBIDDEN` | Insufficient permissions |
| `NOT_FOUND` | Resource not found |
| `VALIDATION_ERROR` | Invalid request data |
| `RATE_LIMITED` | Too many requests |
| `INTERNAL_ERROR` | Server error |

## Rate Limiting

API endpoints are rate limited:
- **Authenticated users**: 1000 requests/hour
- **Anonymous users**: 100 requests/hour
- **AI endpoints**: 50 requests/hour

Rate limit headers are included in responses:
```
X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 999
X-RateLimit-Reset: 1640995200
```