---
title: "AI Chat Interface"
description: "Build engaging conversational AI experiences with real-time streaming, message history, and multi-turn conversations"
---

# AI Chat Interface

## What

Create powerful conversational AI experiences with real-time streaming responses, persistent message history, and intuitive chat interfaces. Perfect for customer support, AI assistants, and interactive applications.

## Why

- **Real-time Conversations**: Streaming responses provide immediate user feedback
- **Context Awareness**: Maintain conversation history across multiple turns
- **Production Ready**: Built-in session management, error handling, and persistence
- **Mobile Optimized**: Responsive design that works on all devices

## How

### Quick Setup

1. **Create Chat API Endpoint**
```typescript
// app/api/ai/chat/route.ts
import { streamText } from 'ai';
import { openai } from '@ai-sdk/openai';
import { withAuthentication } from '@/lib/api/base';

export const POST = withAuthentication(async (session, request) => {
  const { messages } = await request.json();

  const result = await streamText({
    model: openai('gpt-3.5-turbo'),
    messages,
  });

  return result.toDataStreamResponse();
});
```

2. **Build Chat Component**
```tsx
'use client';

import { useChat } from 'ai/react';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';

export function ChatInterface() {
  const { messages, input, handleInputChange, handleSubmit, isLoading } = useChat({
    api: '/api/ai/chat',
  });

  return (
    <div className="flex flex-col h-[600px] max-w-2xl mx-auto border rounded-lg">
      <div className="flex-1 overflow-y-auto p-4 space-y-4">
        {messages.map((message) => (
          <div
            key={message.id}
            className={`flex ${
              message.role === 'user' ? 'justify-end' : 'justify-start'
            }`}
          >
            <div
              className={`max-w-[80%] px-4 py-2 rounded-lg ${
                message.role === 'user'
                  ? 'bg-blue-500 text-white'
                  : 'bg-gray-100 text-gray-900'
              }`}
            >
              {message.content}
            </div>
          </div>
        ))}
      </div>

      <form onSubmit={handleSubmit} className="p-4 border-t">
        <div className="flex space-x-2">
          <Input
            value={input}
            onChange={handleInputChange}
            placeholder="Type your message..."
            disabled={isLoading}
          />
          <Button type="submit" disabled={isLoading}>
            {isLoading ? 'Sending...' : 'Send'}
          </Button>
        </div>
      </form>
    </div>
  );
}
```

## Example

### Advanced Chat with Persistence

Build a chat interface that saves conversation history:

```tsx
'use client';

import { useChat } from 'ai/react';
import { useState, useEffect } from 'react';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { ScrollArea } from '@/components/ui/scroll-area';

export function PersistentChatInterface() {
  const [conversationId, setConversationId] = useState<string>();

  const {
    messages,
    input,
    handleInputChange,
    handleSubmit,
    isLoading,
    setMessages,
    reload,
    stop
  } = useChat({
    api: '/api/ai/chat',
    id: conversationId,
    body: {
      conversationId,
    },
  });

  // Load previous conversation on mount
  useEffect(() => {
    const loadConversation = async () => {
      if (conversationId) {
        try {
          const response = await fetch(`/api/conversations/${conversationId}`);
          const data = await response.json();
          if (data.messages) {
            setMessages(data.messages);
          }
        } catch (error) {
          console.error('Failed to load conversation:', error);
        }
      }
    };
    loadConversation();
  }, [conversationId, setMessages]);

  const startNewConversation = () => {
    setConversationId(crypto.randomUUID());
    setMessages([]);
  };

  const clearChat = () => setMessages([]);

  return (
    <div className="flex flex-col h-[700px] max-w-2xl mx-auto border rounded-lg">
      {/* Header */}
      <div className="border-b p-4 flex justify-between items-center">
        <h2 className="text-lg font-semibold">AI Assistant</h2>
        <div className="flex space-x-2">
          <Button variant="outline" size="sm" onClick={clearChat}>
            Clear
          </Button>
          <Button variant="outline" size="sm" onClick={startNewConversation}>
            New Chat
          </Button>
        </div>
      </div>

      {/* Messages */}
      <ScrollArea className="flex-1 p-4">
        <div className="space-y-4">
          {messages.length === 0 && (
            <div className="text-center text-gray-500 py-8">
              <p>üëã Hi! I'm your AI assistant.</p>
              <p className="text-sm mt-1">Ask me anything to get started.</p>
            </div>
          )}
          {messages.map((message) => (
            <div
              key={message.id}
              className={`flex ${
                message.role === 'user' ? 'justify-end' : 'justify-start'
              }`}
            >
              <div
                className={`max-w-[80%] px-4 py-2 rounded-lg ${
                  message.role === 'user'
                    ? 'bg-blue-500 text-white'
                    : 'bg-gray-100 text-gray-900'
                }`}
              >
                <div className="whitespace-pre-wrap">{message.content}</div>
              </div>
            </div>
          ))}
          {isLoading && (
            <div className="flex justify-start">
              <div className="bg-gray-100 text-gray-900 px-4 py-2 rounded-lg">
                <div className="flex items-center space-x-1">
                  <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div>
                  <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-100"></div>
                  <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-200"></div>
                </div>
              </div>
            </div>
          )}
        </div>
      </ScrollArea>

      {/* Input */}
      <form onSubmit={handleSubmit} className="border-t p-4">
        <div className="flex space-x-2">
          <Input
            value={input}
            onChange={handleInputChange}
            placeholder="Ask me anything..."
            disabled={isLoading}
            className="flex-1"
          />
          <Button
            type="submit"
            disabled={isLoading || !input.trim()}
          >
            {isLoading ? 'Thinking...' : 'Send'}
          </Button>
          {isLoading && (
            <Button
              type="button"
              variant="outline"
              onClick={stop}
            >
              Stop
            </Button>
          )}
        </div>
      </form>
    </div>
  );
}
```

### Chat with Custom System Prompt

Customize the AI's behavior with system prompts:

```typescript
// app/api/ai/chat/route.ts
export const POST = withAuthentication(async (session, request) => {
  const { messages } = await request.json();

  // Add system prompt
  const systemMessage = {
    role: 'system' as const,
    content: 'You are a helpful AI assistant specialized in web development. Provide clear, practical answers and code examples when appropriate.'
  };

  const result = await streamText({
    model: openai('gpt-3.5-turbo'),
    messages: [systemMessage, ...messages],
    temperature: 0.7,
    maxTokens: 1000,
  });

  return result.toDataStreamResponse();
});
```

### Message Management Features

Add advanced chat controls:

```tsx
export function AdvancedChatInterface() {
  const {
    messages,
    setMessages,
    input,
    handleInputChange,
    handleSubmit,
    isLoading,
    reload,
    stop
  } = useChat({
    api: '/api/ai/chat',
    onError: (error) => {
      console.error('Chat error:', error);
      // Show user-friendly error message
    },
    onFinish: (message) => {
      // Save message to database, analytics, etc.
      console.log('Message completed:', message);
    },
  });

  // Regenerate last AI response
  const regenerateResponse = () => {
    if (messages.length > 0) {
      reload();
    }
  };

  // Delete specific message
  const deleteMessage = (messageId: string) => {
    setMessages(messages.filter(m => m.id !== messageId));
  };

  // Edit user message
  const editMessage = (messageId: string, newContent: string) => {
    setMessages(messages.map(m =>
      m.id === messageId ? { ...m, content: newContent } : m
    ));
  };

  return (
    <div className="space-y-4">
      {messages.map((message) => (
        <div key={message.id} className="group relative">
          <div className={`message ${message.role}`}>
            {message.content}
          </div>

          {/* Message actions */}
          <div className="opacity-0 group-hover:opacity-100 absolute top-0 right-0">
            {message.role === 'assistant' && (
              <Button size="sm" variant="ghost" onClick={regenerateResponse}>
                üîÑ Regenerate
              </Button>
            )}
            <Button
              size="sm"
              variant="ghost"
              onClick={() => deleteMessage(message.id)}
            >
              üóëÔ∏è Delete
            </Button>
          </div>
        </div>
      ))}
    </div>
  );
}
```

## Key Features

- **Real-time Streaming**: See responses as they're generated
- **Message History**: Persistent conversation context
- **Error Handling**: Graceful handling of API failures
- **Mobile Responsive**: Optimized for all screen sizes
- **Customizable**: System prompts, styling, and behavior
- **Message Controls**: Edit, delete, and regenerate messages

## Chat Patterns

### Customer Support Bot
```tsx
const supportSystemPrompt = {
  role: 'system' as const,
  content: `You are a helpful customer support agent for our SaaS platform.
  Always be polite, provide accurate information, and escalate complex issues to human support when needed.`
};
```

### Code Assistant
```tsx
const codeSystemPrompt = {
  role: 'system' as const,
  content: `You are a senior software engineer specialized in TypeScript, React, and Next.js.
  Provide clear explanations and working code examples. Always follow best practices.`
};
```

### Creative Writing Partner
```tsx
const creativeSystemPrompt = {
  role: 'system' as const,
  content: `You are a creative writing assistant. Help users brainstorm ideas,
  improve their writing, and provide constructive feedback. Be encouraging and imaginative.`
};
```

## Interactive Playground

Experience the chat interface in action at `/playground/chat` where you can test different conversation flows and features.

## Next Steps

- **Add Authentication**: Secure conversations with `/authentication`
- **Implement Text Generation**: Single-turn AI with `/text-generation`
- **Monitor Performance**: Track usage with `/observability`
- **Follow Best Practices**: Optimize with `/ai-best-practices`